<project name="setup third party project" default="start" basedir=".">
	<target name="start">
		<echo message="setup third party project..." />

		<property file="setup.properties" />
		<property name="build.date.pattern" value="MMM-dd-yyyy" />
		<property name="build.time.pattern" value="HH:mm:ss" />
		<property name="build.user" value="${user.name}" />

		<tstamp>
			<format property="build.date" pattern="${build.date.pattern}" />
			<format property="build.time" pattern="${build.time.pattern}" />
		</tstamp>

		<echo message="Build Date   : ${build.date}" />
		<echo message="Build Time   : ${build.time}hrs" />
		<echo message="Build By     : ${build.user}" />

		<echo message=" " />

		<!-- Copying version.properties to org/iq/version package -->
		<antcall target="copy.version.properties"></antcall>

		<!-- Copying build scripts to project/build -->
		<antcall target="copy.build.scripts"></antcall>

		<!-- Copying required supporting libraries to project/lib -->
		<antcall target="copy.libraries"></antcall>

		<!-- Copying resources to project/res -->
		<antcall target="copy.resources"></antcall>

		<!-- Copying artifacts to project/web -->
		<antcall target="copy.web.artifacts"></antcall>

		<!-- Copying .project and .classpath to project root -->
		<antcall target="setup.project"></antcall>

	</target>

	<!-- Copying version.properties to org/iq/version package -->
	<target name="copy.version.properties">
		<echo message="Copying version.properties to org/iq/version package" />
		<copy todir="../src/org/iq/version" verbose="true">
			<fileset dir="${release.pkg.dir}/setup/files">
				<include name="version.properties" />
			</fileset>
		</copy>
	</target>

	<!-- Copying build scripts to ${proj.root}/build -->
	<target name="copy.build.scripts">
		<echo message="Copying build scripts to build folder of the project" />
		<copy todir="../build" verbose="true">
			<fileset dir="${release.pkg.dir}/setup/files">
				<include name="build.properties" />
				<include name="build.xml" />
			</fileset>
		</copy>
		
		<echo message="Copying the core war to build folder of the project" />
		<copy todir="../build/core-war" verbose="true">
			<fileset dir="${release.pkg.dir}/war">
				<include name="*.war" />
			</fileset>
		</copy>
	</target>

	<!-- Copying required supporting libraries to project/lib -->
	<target name="copy.libraries">
		<echo message="Copying required libraries to lib folder of the project" />
		<copy todir="../lib" verbose="true">
			<!-- Copying the core jar to project /lib -->
			<fileset dir="${release.pkg.dir}/jar">
				<include name="*.jar" />
			</fileset>
			<!-- Copying required supporting jars to project /lib -->
			<fileset dir="${release.pkg.dir}/lib">
				<include name="*.jar" />
			</fileset>
		</copy>
	</target>

	<!-- Copying required resources to project/res -->
	<target name="copy.resources">
		<echo message="Copying required resources to res folder of the project" />
		<copy todir="../res/conf" verbose="true">
			<fileset dir="${release.pkg.dir}/conf">
				<include name="**/**" />
			</fileset>
		</copy>
	</target>

	<!-- Copying web artifacts to project/web -->
	<target name="copy.web.artifacts">
		<!-- Copying example index.html to project/web -->
		<echo message="Copying example index.html to project/web" />
		<copy todir="../web" verbose="true">
			<fileset dir="${release.pkg.dir}/setup/files">
				<include name="index.html" />
			</fileset>
		</copy>
	</target>
	
	<target name="setup.project">
		<copy todir=".." verbose="true" overwrite="true">
			<fileset dir="${release.pkg.dir}/setup/files">
				<include name=".classpath" />
				<include name=".project" />
			</fileset>
		</copy>
	</target>
</project>